find_package(Boost REQUIRED regex)
rock_library(graph_analysis
    SOURCES
        BaseGraph.cpp
        DirectedGraphInterface.cpp
        Edge.cpp
        EdgeIterable.cpp
        EdgeIterator.cpp
        EdgeTypeManager.cpp
        Filter.cpp
        GraphElement.cpp
        GraphIO.cpp
        Percolation.cpp
        SubGraph.cpp
        Vertex.cpp
        VertexIterable.cpp
        VertexIterator.cpp
        VertexTypeManager.cpp
        algorithms/CorrelationClustering.cpp
        algorithms/FloydWarshall.cpp
        algorithms/GLPKSolver.cpp
        algorithms/MinCostFlow.cpp
        algorithms/MultiCommodityEdge.cpp
        algorithms/MultiCommodityMinCostFlow.cpp
        boost_graph/DirectedGraph.cpp
        filters/EdgeContextFilter.cpp
        filters/RegexFilters.cpp
        gui/ActionCommander.cpp
        gui/EdgeItem.cpp
        gui/EdgeItemTypeManager.cpp
        gui/FilterItem.cpp
        gui/FilterManager.cpp
        gui/GraphWidget.cpp
        gui/GraphWidgetManager.cpp
        gui/IconManager.cpp
        gui/Main.cpp
        gui/NodeItem.cpp
        gui/NodeItemTypeManager.cpp
        gui/WidgetManager.cpp
        gui/component_editor/Cluster.cpp
        gui/component_editor/ComponentEditorWidget.cpp
        gui/component_editor/InputPort.cpp
        gui/component_editor/Operation.cpp
        gui/component_editor/OutputPort.cpp
        gui/component_editor/Port.cpp
        gui/component_editor/Property.cpp
        gui/dialogs/AddFilterDialog.cpp
        gui/dialogs/AddGraphElement.cpp
        gui/dialogs/CustomDialog.cpp
        gui/dialogs/ExportFile.cpp
        gui/dialogs/PropertyDialog.cpp
        gui/dialogs/RenameFeatureDialog.cpp
        gui/dialogs/RenameFilterDialog.cpp
        gui/dialogs/SwapFeaturesDialog.cpp
        gui/dialogs/SwapFiltersDialog.cpp
        gui/graphitem/Cluster.cpp
        gui/graphitem/Simple.cpp
        gui/graphitem/edges/Simple.cpp
        gui/items/Feature.cpp
        gui/items/Label.cpp
        gui/layer_view/LayerViewWidget.cpp
        gui/layeritem/Resource.cpp
        gui/layeritem/edges/Simple.cpp
        io/GVGraph.cpp
        io/GexfReader.cpp
        io/GexfWriter.cpp
        io/GraphvizWriter.cpp
        io/YamlReader.cpp
        io/YamlWriter.cpp
        lemon/DirectedGraph.cpp
        lemon/DirectedSubGraph.cpp
        percolation/Event.cpp
        percolation/RandomNumberGenerator.cpp
        percolation/strategies/RandomDraw.cpp
        percolation/strategies/UniformRandomEdgeRemoval.cpp
        percolation/strategies/UniformRandomVertexRemoval.cpp
        snap/DirectedGraph.cpp
        snap/DirectedSubGraph.cpp
    HEADERS
        Algorithms.hpp
        BaseGraph.hpp
        BaseIterable.hpp
        DirectedGraphInterface.hpp
        Edge.hpp
        EdgeIterable.hpp
        EdgeIterator.hpp
        EdgeTypeManager.hpp
        Filter.hpp
        Graph.hpp
        GraphAnalysis.hpp
        GraphElement.hpp
        GraphIO.hpp
        GraphView.hpp
        NWeighted.hpp
        NWeightedEdge.hpp
        Percolation.hpp
        SubGraph.hpp
        SubGraphImpl.hpp
        TypedGraph.hpp
        Vertex.hpp
        VertexIterable.hpp
        VertexIterator.hpp
        VertexTypeManager.hpp
        WeightedEdge.hpp
        WeightedVertex.hpp
        algorithms/CorrelationClustering.hpp
        algorithms/DistanceMatrix.hpp
        algorithms/FloydWarshall.hpp
        algorithms/GLPKSolver.hpp
        algorithms/MinCostFlow.hpp
        algorithms/MultiCommodityEdge.hpp
        algorithms/MultiCommodityMinCostFlow.hpp
        algorithms/MultiCommodityVertex.hpp
        boost_graph/DirectedGraph.hpp
        filters/CommonFilters.hpp
        filters/EdgeContextFilter.hpp
        filters/RegexFilters.hpp
        gui/ActionCommander.hpp
        gui/EdgeGetter.hpp
        gui/EdgeItem.hpp
        gui/EdgeItemTypeManager.hpp
        gui/FilterItem.hpp
        gui/FilterManager.hpp
        gui/GraphWidget.hpp
        gui/GraphWidgetManager.hpp
        gui/IconManager.hpp
        gui/NodeItem.hpp
        gui/NodeItemTypeManager.hpp
        gui/VertexGetter.hpp
        gui/WidgetManager.hpp
        gui/component_editor/Cluster.hpp
        gui/component_editor/ComponentEditorWidget.hpp
        gui/component_editor/InputPort.hpp
        gui/component_editor/Operation.hpp
        gui/component_editor/OutputPort.hpp
        gui/component_editor/Port.hpp
        gui/component_editor/Property.hpp
        gui/dialogs/AddFilterDialog.hpp
        gui/dialogs/AddGraphElement.hpp
        gui/dialogs/CustomDialog.hpp
        gui/dialogs/ExportFile.hpp
        gui/dialogs/PropertyDialog.hpp
        gui/dialogs/RenameFeatureDialog.hpp
        gui/dialogs/RenameFilterDialog.hpp
        gui/dialogs/SwapFeaturesDialog.hpp
        gui/dialogs/SwapFiltersDialog.hpp
        gui/graphitem/Cluster.hpp
        gui/graphitem/Simple.hpp
        gui/graphitem/edges/Simple.hpp
        gui/items/Feature.hpp
        gui/items/Label.hpp
        gui/layer_view/LayerViewWidget.hpp
        gui/layeritem/Resource.hpp
        gui/layeritem/edges/Simple.hpp
        io/GVGraph.hpp
        io/GexfReader.hpp
        io/GexfWriter.hpp
        io/GraphvizWriter.hpp
        io/YamlReader.hpp
        io/YamlWriter.hpp
        lemon/ArcIterator.hpp
        lemon/DirectedGraph.hpp
        lemon/DirectedSubGraph.hpp
        lemon/Graph.hpp
        lemon/NodeIterator.hpp
        percolation/Event.hpp
        percolation/RandomNumberGenerator.hpp
        percolation/strategies/RandomDraw.hpp
        percolation/strategies/UniformRandomEdgeRemoval.hpp
        percolation/strategies/UniformRandomVertexRemoval.hpp
        snap/DirectedGraph.hpp
        snap/DirectedSubGraph.hpp
        snap/EdgeIterator.hpp
        snap/Graph.hpp
        snap/NodeIterator.hpp
    DEPS_PKGCONFIG
        lemon snap base-lib gexf numeric gsl libgvc utilmm
    DEPS_PLAIN
        Boost_REGEX
    MOC
        gui/FilterManager.hpp
        gui/GraphWidget.hpp
        gui/GraphWidgetManager.hpp
        gui/component_editor/ComponentEditorWidget.hpp
        gui/dialogs/AddFilterDialog.hpp
        gui/dialogs/AddGraphElement.hpp
        gui/dialogs/ExportFile.hpp
        gui/dialogs/PropertyDialog.hpp
        gui/dialogs/RenameFeatureDialog.hpp
        gui/dialogs/RenameFilterDialog.hpp
        gui/dialogs/SwapFeaturesDialog.hpp
        gui/dialogs/SwapFiltersDialog.hpp
        gui/layer_view/LayerViewWidget.hpp
    DEPS_PKGCONFIG QtGui
    UI
        gui/dialogs/add_filter_dialog_gui.ui
        gui/dialogs/add_graph_element.ui
        gui/dialogs/graph_analysis_gui.ui
        gui/dialogs/property_dialog_gui.ui
        gui/dialogs/rename_feature_dialog_gui.ui
        gui/dialogs/swap_features_dialog_gui.ui
        gui/dialogs/swap_filters_dialog_gui.ui
)
target_link_libraries(graph_analysis glpk cgraph)
get_target_property(graph_analysis-linker_flags graph_analysis LINK_FLAGS)
if(graph_analysis-linker_flags)
    set(graph_analysis-linker_flags "${graph_analysis-linker_flags} -Wl,--exclude-libs=libsnap.a" )
else()
    set(graph_analysis-linker_flags "-Wl,--exclude-libs=libsnap.a" )
endif()
set_target_properties(graph_analysis PROPERTIES LINK_FLAGS ${graph_analysis-linker_flags})

rock_executable(graph_analysis-bm Benchmark.cpp
    DEPS graph_analysis
    DEPS_PLAIN rt
    NOINSTALL)

rock_executable(graph_analysis-gui gui/Main.cpp
    DEPS graph_analysis
    )

rock_executable(graph_analysis-reader utils/GraphReaderMain.cpp
    DEPS graph_analysis
    )
